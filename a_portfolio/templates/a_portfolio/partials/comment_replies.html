{% if comment.get_reply_count > 0 %}
<div class="mt-3 ml-12 space-y-3 border-l-2 border-gray-200 pl-4">
    {% for reply in comment.replies.all %}
    <div class="flex items-start gap-2">
        <img src="{{ reply.user.profile.avatar }}" alt="{{ reply.user.profile.name }}" class="w-8 h-8 rounded-full object-cover flex-shrink-0">
        <div class="flex-1">
            <div class="flex items-center justify-between mb-1">
                <div class="flex items-center gap-2">
                    <span class="text-sm font-medium">{{ reply.user.profile.name }}</span>
                    <span class="text-xs text-gray-500">{{ reply.created_at|timesince }} ago</span>
                </div>
                {% if request.user == reply.user or request.user == photo.owner or request.user.is_staff %}
                <form method="post" action="{% url 'portfolio-comment-delete' photo.pk reply.pk %}" hx-post="{% url 'portfolio-comment-delete' photo.pk reply.pk %}" hx-target="#comments-section" hx-swap="innerHTML" class="inline">
                    {% csrf_token %}
                    <button type="submit" class="text-xs text-red-600 hover:text-red-800">Delete</button>
                </form>
                {% endif %}
            </div>
            <p class="text-sm text-gray-700 whitespace-pre-line">{{ reply.content }}</p>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

