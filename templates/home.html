{% extends 'layouts/blank.html' %}
{% block meta_title %}HerbiesPlace · Showcase public shots{% endblock %}
{% block meta_description %}Discover public showcases from photographers, models, and MUAs on HerbiesPlace. Explore featured work and connect with creatives.{% endblock %}

{% block content %} 

<section class="max-w-6xl mx-auto px-6 md:px-10 py-16 space-y-10">
    <div class="space-y-3">
        <p class="text-sm uppercase tracking-wide text-indigo-500 font-semibold">Showcase</p>
        <h1 class="text-4xl font-bold text-gray-900">Featured public shots</h1>
    </div>

    <div class="relative">
        {% if public_photos %}
        <div class="relative aspect-[16/9] rounded-2xl shadow overflow-hidden bg-gray-100">
            {% for photo in public_photos %}
            <a href="#"
               class="absolute inset-0 transition-opacity duration-700 ease-in-out {% if forloop.first %}opacity-100{% else %}opacity-0 pointer-events-none{% endif %} lightbox-trigger cursor-pointer"
               data-slide
               data-pk="{{ photo.pk }}"
               data-image="{{ photo.image.url }}"
               data-title="{{ photo.title }}"
               data-description="{{ photo.description|default:'' }}"
               data-owner="{{ photo.owner.profile.name }}"
               data-role="{{ photo.owner.profile.role }}"
               data-avatar="{{ photo.owner.profile.avatar }}"
               data-date="{{ photo.captured_on|date:'M d, Y' }}"
               data-detail-url="{% url 'portfolio-detail' photo.pk %}">
                <img src="{{ photo.image.url }}" alt="{{ photo.title }}" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/30 to-transparent p-6 flex flex-col justify-end gap-1">
                    <h3 class="text-2xl font-semibold text-white">{{ photo.title }}</h3>
                    <div class="text-sm text-indigo-100 flex gap-3">
                        {% if photo.category %}<span>{{ photo.category.name }}</span>{% endif %}
                        {% if photo.captured_on %}<span>Captured {{ photo.captured_on|date:"M d, Y" }}</span>{% endif %}
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
        <div class="flex justify-center gap-2 mt-4">
            {% for photo in public_photos %}
            <button type="button"
                class="h-2.5 w-2.5 rounded-full {% if forloop.first %}bg-indigo-600{% else %}bg-gray-300{% endif %}"
                aria-label="Slide {{ forloop.counter }}"
                data-dot="{{ forloop.counter0 }}"></button>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-gray-500 text-sm py-10">
            No public photos yet. Check back soon.
        </div>
        {% endif %}
    </div>
</section>

<!-- How it works -->
<section class="max-w-6xl mx-auto px-6 md:px-10 py-12 grid gap-8 md:grid-cols-3">
    <div>
        <p class="text-sm uppercase tracking-wide text-indigo-500 font-semibold">How it works</p>
        <h2 class="text-2xl font-bold text-gray-900 mt-2">Three simple steps</h2>
        <p class="text-gray-600 mt-2">Create your profile, publish your showcase, and connect with collaborators.</p>
    </div>
    <div class="space-y-3 md:col-span-2">
        <div class="p-4 bg-white shadow rounded-lg border">
            <p class="text-sm font-semibold text-indigo-700">1. Create your profile</p>
            <p class="text-sm text-gray-600">Add your avatar, role (photographer/model/MUA), and basic info.</p>
        </div>
        <div class="p-4 bg-white shadow rounded-lg border">
            <p class="text-sm font-semibold text-indigo-700">2. Upload your best work</p>
            <p class="text-sm text-gray-600">Build your showcase with categories, visibility controls, and lightbox views.</p>
        </div>
        <div class="p-4 bg-white shadow rounded-lg border">
            <p class="text-sm font-semibold text-indigo-700">3. Connect & collaborate</p>
            <p class="text-sm text-gray-600">Find peers, send requests, message privately, and get booked.</p>
        </div>
    </div>
</section>

<!-- Role-specific benefits -->
<section class="max-w-6xl mx-auto px-6 md:px-10 py-12 space-y-6">
    <div>
        <p class="text-sm uppercase tracking-wide text-indigo-500 font-semibold">Built for creators</p>
        <h2 class="text-2xl font-bold text-gray-900 mt-2">Why it works for you</h2>
        <p class="text-gray-600 mt-2">Tailored value for photographers, models, and MUAs.</p>
    </div>
    <div class="grid gap-6 md:grid-cols-3">
        <div class="bg-white shadow rounded-lg p-6 border space-y-2">
            <h3 class="text-lg font-semibold text-gray-900">For Photographers</h3>
            <ul class="text-sm text-gray-700 space-y-1 list-disc list-inside">
                <li>Showcase sets with categories and visibility controls.</li>
                <li>Lightbox and download control for clients.</li>
                <li>Connect with models/MUAs; manage requests.</li>
            </ul>
        </div>
        <div class="bg-white shadow rounded-lg p-6 border space-y-2">
            <h3 class="text-lg font-semibold text-gray-900">For Models</h3>
            <ul class="text-sm text-gray-700 space-y-1 list-disc list-inside">
                <li>Build a book with roles, credits, and captures.</li>
                <li>Get discovered via public showcase and links.</li>
                <li>Private workspace for works-in-progress.</li>
            </ul>
        </div>
        <div class="bg-white shadow rounded-lg p-6 border space-y-2">
            <h3 class="text-lg font-semibold text-gray-900">For MUAs</h3>
            <ul class="text-sm text-gray-700 space-y-1 list-disc list-inside">
                <li>Display looks by category and style.</li>
                <li>Collaborate with photographers/models easily.</li>
                <li>Control who sees behind-the-scenes content.</li>
            </ul>
        </div>
    </div>
</section>

<!-- Lightbox Modal -->
<div id="lightbox-modal" class="fixed inset-0 bg-black bg-opacity-100 z-50 hidden flex items-center justify-center p-4" onclick="closeLightbox()">
    <div class="relative max-w-7xl max-h-full" onclick="event.stopPropagation()">
        <button onclick="closeLightbox()" class="absolute top-4 right-4 text-white hover:text-gray-300 text-4xl font-bold z-10 bg-black bg-opacity-50 rounded-full w-12 h-12 flex items-center justify-center">×</button>
        <img id="lightbox-image" src="" alt="" class="max-w-full max-h-[90vh] object-contain rounded-lg">
        <a id="lightbox-detail-link" href="#" class="absolute bottom-4 right-4 text-white hover:text-gray-200 text-sm bg-black bg-opacity-40 hover:bg-opacity-60 px-4 py-2 rounded-lg transition">View Details</a>
    </div>
</div>

{% block javascript %}
{{ block.super }}
<script>
document.addEventListener('DOMContentLoaded', () => {
    const slides = Array.from(document.querySelectorAll('[data-slide]'));
    const dots = Array.from(document.querySelectorAll('[data-dot]'));
    if (!slides.length) return;

    let current = 0;
    const show = (idx) => {
        current = idx;
        slides.forEach((slide, i) => {
            slide.classList.toggle('opacity-100', i === idx);
            slide.classList.toggle('pointer-events-none', i !== idx);
            slide.classList.toggle('opacity-0', i !== idx);
        });
        dots.forEach((dot, i) => {
            dot.classList.toggle('bg-indigo-600', i === idx);
            dot.classList.toggle('bg-gray-300', i !== idx);
        });
    };

    const next = () => show((current + 1) % slides.length);

    let timer = setInterval(next, 4000);
    const reset = () => {
        clearInterval(timer);
        timer = setInterval(next, 4000);
    };

    dots.forEach((dot, i) => {
        dot.addEventListener('click', () => {
            show(i);
            reset();
        });
    });

    // Lightbox functionality
    const triggers = document.querySelectorAll('.lightbox-trigger');
    triggers.forEach(trigger => {
        trigger.addEventListener('click', function(e) {
            e.preventDefault();
            openLightbox(
                this.dataset.pk,
                this.dataset.image,
                this.dataset.title,
                this.dataset.description,
                this.dataset.owner,
                this.dataset.role,
                this.dataset.avatar,
                this.dataset.date,
                this.dataset.detailUrl
            );
        });
    });
});

function openLightbox(pk, imageUrl, title, description, ownerName, ownerRole, ownerAvatar, date, detailUrl) {
    const modal = document.getElementById('lightbox-modal');
    const img = document.getElementById('lightbox-image');
    const detailLink = document.getElementById('lightbox-detail-link');
    
    img.src = imageUrl;
    detailLink.href = detailUrl;
    
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
}

function closeLightbox() {
    const modal = document.getElementById('lightbox-modal');
    modal.classList.add('hidden');
    document.body.style.overflow = '';
}

// Close on Escape key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeLightbox();
    }
});
</script>
{% endblock %}

{% endblock %} 